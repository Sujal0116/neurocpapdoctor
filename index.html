<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroCPAP Doctor Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 100%;
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .demo-badge {
            background: #51cf66;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            display: inline-block;
            margin-top: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #333;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
        }

        .demo-credentials {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 0.85em;
            color: #666;
        }

        .dashboard {
            display: none;
        }

        .dashboard.active {
            display: block;
        }

        .header {
            background: white;
            padding: 20px 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 1.8em;
        }

        .logout-btn {
            padding: 10px 20px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .main-content {
            padding: 30px 40px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .alert-banner {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: white;
            padding: 15px;
            border-radius: 15px;
        }

        .tab {
            padding: 12px 24px;
            background: transparent;
            color: #666;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .stat-title {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #333;
        }

        .patients-grid {
            display: grid;
            gap: 20px;
        }

        .patient-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 5px solid transparent;
        }

        .patient-card.critical {
            border-left-color: #ff6b6b;
        }

        .patient-card.warning {
            border-left-color: #ffd93d;
        }

        .patient-card.normal {
            border-left-color: #51cf66;
        }

        .patient-info h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .patient-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .metric {
            text-align: center;
        }

        .metric-label {
            font-size: 0.8em;
            color: #666;
        }

        .metric-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #333;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
        }

        .chart-title {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            background: white;
            border-radius: 15px;
            overflow: hidden;
        }

        th, td {
            padding: 15px;
            text-align: left;
        }

        th {
            background: #667eea;
            color: white;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        .severity-severe {
            color: #ff6b6b;
            font-weight: bold;
        }

        .severity-moderate {
            color: #ffd93d;
            font-weight: bold;
        }

        .severity-mild {
            color: #51cf66;
            font-weight: bold;
        }

        .report-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .summary-item {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
        }

        .summary-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
    </style>
</head>
<body>
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1>üè• NeuroCPAP</h1>
                <p>Doctor Dashboard</p>
                <span class="demo-badge">Demo Mode</span>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="text" id="username" value="demo@doctor.com">
                </div>
                
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" value="demo123">
                </div>
                
                <button type="submit" class="login-btn">Login to Dashboard</button>
            </form>
            
            <div class="demo-credentials">
                <strong>Demo Credentials:</strong><br>
                Email: demo@doctor.com<br>
                Password: demo123
            </div>
        </div>
    </div>

    <div id="dashboard" class="dashboard">
        <div class="header">
            <div>
                <h1>üè• NeuroCPAP Dashboard</h1>
                <p>Real-time Patient Monitoring System</p>
            </div>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>

        <div class="main-content">
            <div class="alert-banner">
                ‚ö†Ô∏è <strong>CRITICAL ALERT:</strong> Patient Rajesh Kumar - SpO2 dropped to 86%
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab(0)">Overview</button>
                <button class="tab" onclick="switchTab(1)">Patients</button>
                <button class="tab" onclick="switchTab(2)">Analytics</button>
                <button class="tab" onclick="switchTab(3)">Reports</button>
            </div>

            <div id="tab0" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-title">Total Patients</div>
                        <div class="stat-value">24</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Critical Cases</div>
                        <div class="stat-value">3</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Avg Apnea Events</div>
                        <div class="stat-value">13.2</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Active Devices</div>
                        <div class="stat-value">21</div>
                    </div>
                </div>

                <h2 style="color: white; margin-bottom: 15px;">Recent Patient Activity</h2>
                <div class="patients-grid" id="patientsOverview"></div>
            </div>

            <div id="tab1" class="tab-content">
                <h2 style="color: white; margin-bottom: 15px;">All Patients</h2>
                <div class="patients-grid" id="allPatients"></div>
            </div>

            <div id="tab2" class="tab-content">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-title">SpO2 Trends (24H)</div>
                        <canvas id="spo2Chart" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">Heart Rate Monitor (24H)</div>
                        <canvas id="heartRateChart" height="200"></canvas>
                    </div>
                </div>

                <h3 style="color: white; margin: 20px 0;">Recent Apnea Events</h3>
                <table id="eventsTable"></table>
            </div>

            <div id="tab3" class="tab-content">
                <div class="report-section">
                    <h2>Weekly Summary Report</h2>
                    <p style="color: #666; margin: 10px 0;">Dec 25 - Dec 31, 2025</p>

                    <div class="summary-grid">
                        <div class="summary-item">
                            <div class="summary-value">168</div>
                            <div>Total Sleep Hours</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-value">342</div>
                            <div>Apnea Events</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-value">92%</div>
                            <div>Avg SpO2</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-value">89</div>
                            <div>Motor Interventions</div>
                        </div>
                    </div>

                    <canvas id="patientBreakdownChart" height="100"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        var patients = [
            { name: 'Rajesh Kumar', age: 45, gender: 'Male', deviceId: 'NCPAP-001', status: 'critical', apneaEvents: 23, avgSpo2: 89, avgHR: 68 },
            { name: 'Priya Sharma', age: 38, gender: 'Female', deviceId: 'NCPAP-002', status: 'warning', apneaEvents: 12, avgSpo2: 92, avgHR: 72 },
            { name: 'Amit Patel', age: 52, gender: 'Male', deviceId: 'NCPAP-003', status: 'normal', apneaEvents: 5, avgSpo2: 96, avgHR: 70 }
        ];

        var events = [
            { time: '06:45', patient: 'Rajesh Kumar', duration: 22, spo2Drop: 9, type: 'Central', severity: 'severe', action: 'Motor activated' },
            { time: '05:30', patient: 'Priya Sharma', duration: 15, spo2Drop: 5, type: 'Central', severity: 'moderate', action: 'Motor activated' },
            { time: '04:15', patient: 'Rajesh Kumar', duration: 18, spo2Drop: 7, type: 'Central', severity: 'severe', action: 'Motor activated' },
            { time: '03:20', patient: 'Amit Patel', duration: 8, spo2Drop: 3, type: 'Central', severity: 'mild', action: 'Monitoring' }
        ];

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            var user = document.getElementById('username').value;
            var pass = document.getElementById('password').value;

            if (user === 'demo@doctor.com' && pass === 'demo123') {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('dashboard').classList.add('active');
                initDashboard();
            } else {
                alert('Invalid credentials!');
            }
        });

        function logout() {
            document.getElementById('dashboard').classList.remove('active');
            document.getElementById('loginPage').style.display = 'flex';
        }

        function switchTab(index) {
            var tabs = document.querySelectorAll('.tab');
            var contents = document.querySelectorAll('.tab-content');
            
            for (var i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
                contents[i].classList.remove('active');
            }
            
            tabs[index].classList.add('active');
            contents[index].classList.add('active');
        }

        function renderPatients(containerId) {
            var container = document.getElementById(containerId);
            var html = '';
            
            for (var i = 0; i < patients.length; i++) {
                var p = patients[i];
                html += '<div class="patient-card ' + p.status + '">';
                html += '<div class="patient-info">';
                html += '<h3>' + p.name + '</h3>';
                html += '<p>' + p.age + ' years ‚Ä¢ ' + p.gender + ' ‚Ä¢ ' + p.deviceId + '</p>';
                html += '</div>';
                html += '<div class="patient-metrics">';
                html += '<div class="metric"><div class="metric-label">Apnea Events</div><div class="metric-value">' + p.apneaEvents + '</div></div>';
                html += '<div class="metric"><div class="metric-label">Avg SpO2</div><div class="metric-value">' + p.avgSpo2 + '%</div></div>';
                html += '<div class="metric"><div class="metric-label">Avg HR</div><div class="metric-value">' + p.avgHR + '</div></div>';
                html += '</div></div>';
            }
            
            container.innerHTML = html;
        }

        function renderEventsTable() {
            var table = document.getElementById('eventsTable');
            var html = '<thead><tr><th>Time</th><th>Patient</th><th>Duration</th><th>SpO2 Drop</th><th>Type</th><th>Severity</th><th>Action</th></tr></thead><tbody>';
            
            for (var i = 0; i < events.length; i++) {
                var e = events[i];
                html += '<tr>';
                html += '<td>' + e.time + '</td>';
                html += '<td>' + e.patient + '</td>';
                html += '<td>' + e.duration + 's</td>';
                html += '<td>' + e.spo2Drop + '%</td>';
                html += '<td>' + e.type + '</td>';
                html += '<td class="severity-' + e.severity + '">' + e.severity.toUpperCase() + '</td>';
                html += '<td>' + e.action + '</td>';
                html += '</tr>';
            }
            
            html += '</tbody>';
            table.innerHTML = html;
        }

        function initDashboard() {
            renderPatients('patientsOverview');
            renderPatients('allPatients');
            renderEventsTable();
            
            var spo2Ctx = document.getElementById('spo2Chart').getContext('2d');
            new Chart(spo2Ctx, {
                type: 'line',
                data: {
                    labels: ['00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00'],
                    datasets: [{
                        label: 'SpO2 %',
                        data: [95, 94, 92, 88, 86, 89, 91, 94],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            var hrCtx = document.getElementById('heartRateChart').getContext('2d');
            new Chart(hrCtx, {
                type: 'line',
                data: {
                    labels: ['00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00'],
                    datasets: [{
                        label: 'Heart Rate (bpm)',
                        data: [72, 68, 70, 75, 78, 72, 69, 71],
                        borderColor: '#ff6b6b',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            var breakdownCtx = document.getElementById('patientBreakdownChart').getContext('2d');
            new Chart(breakdownCtx, {
                type: 'bar',
                data: {
                    labels: ['Severe', 'Moderate', 'Mild', 'Normal'],
                    datasets: [{
                        label: 'Patients',
                        data: [3, 8, 9, 4],
                        backgroundColor: ['#ff6b6b', '#ffd93d', '#51cf66', '#339af0']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }
    </script>
</body>
</html>
